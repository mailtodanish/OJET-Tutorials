define(['exports', 'preact/jsx-runtime', './useUser-6dd85af9', 'preact', './PRIVATE_Chart/themes/ChartStyles.css', './classNames-08d99695', './layoutUtils-09c68ca9', './useTranslationBundle-6ef0dab6', './dataStyleUtils-8c4452c2', './accUtils-1557920a', './colorUtils-7c069766', './Chart-0f54dae3'], (function(e,t,i,s,r,n,o,a,d,l,c,u){"use strict";const g=2,h=.25;function x(e,t,i,s,r,n,o){const a=n?1:s,d=g*r,l=(t*(1-i)-(a-1)*d)/a;if(n)return{barWidth:l,offset:-1*l/2,itemsGaps:d};const c=t/2,u=t*(i/2)+e*(l+g*r);return{barWidth:l,offset:o?c-u-l:u-c,itemsGaps:d}}const f=1.5,I=2.5;function m(e){return e.isSelected||e.isFocused?t.jsx(p,{...e}):t.jsx("rect",{x:e.x,y:e.y,"data-oj-series-index":e.seriesIndex,"data-oj-group-index":e.groupIndex,"data-oj-object":"bar","aria-label":e["aria-label"],role:e["aria-label"]?"img":void 0,id:e.activeId,style:{width:e.width,height:e.height,fill:e.fill,stroke:e.stroke,strokeWidth:e.strokeWidth},class:n.classNames([e.isPointerEnabled?r.styles.cursorEnable:void 0,e.isDimmed?r.styles.dimmed:void 0])})}function p(e){const{x:i,y:s,width:o,height:a,fill:d,isSelected:l,isFocused:c}=e,u=l?I:f;return t.jsxs("g",{id:e.activeId,"data-oj-object":"bar","data-oj-series-index":e.seriesIndex,"data-oj-group-index":e.groupIndex,className:e.isDimmed?r.styles.dimmed:"",role:e["aria-label"]?"img":void 0,"aria-label":e["aria-label"],children:[t.jsx("rect",{x:i,y:s,class:n.classNames([l?r.styles.selectedBorder:""]),style:{width:o,height:a,fill:!l&&c?d:void 0}}),t.jsx("rect",{x:i+u,y:s+u,class:n.classNames([r.styles.contrastBorder,e.isPointerEnabled?r.styles.cursorEnable:void 0]),style:{width:o-2*u,height:a-2*u,fill:d}})]})}function b(e,t,i){return{fill:e.color||t.color||i,stroke:e.borderColor||t.borderColor}}function y(e,t,i,s,r){let n,o,a,d,l=e,c=t,u=t-e;return u<1&&(l=Math.floor(l),c=l+1,u=1),r?(o=l,n=i>s?s:i,a=Math.abs(s-i),d=Math.abs(c-l)):(n=l,o=i>s?s:i,a=Math.abs(c-l),d=Math.abs(s-i)),{x:n,y:o,width:a,height:d}}function S(e,t,i,s,r,n,o){let a,d;return i?(a=t.transform(e<0?n:o),n+=e<0?e:0,o+=e>0?e:0,d=t.transform(e<0?n:o),a+=d>a?r:-r):(a=s?t.range()[0]:t.transform(0),d=t.transform(e)),{baselineCoord:a,endCoord:d}}function v(e,t,i,s,r,n,o){const{baselineCoord:a,endCoord:d}=S(e,t,i,s,r,n,o);return(a+d)/2}const w=2;function D(e,t,i,s,r,n){if(!n)return{};const o=function(e,t,i,s){return e?i&&!t||!i&&t?s.x:s.x+s.width:i?s.height+s.y:s.y}(e,t,i,s);return"insideBarEdge"===r?{y:e?s.y+s.height/2:o+(i?-1:1)*(n.height/2+w+2),x:e?o-(i&&!t||!i&&t?-1:1)*(n.width/2+w):s.x+s.width/2}:"outsideBarEdge"===r?{y:e?s.y+s.height/2:o-(i?-1:1)*(n.height/2+w),x:e?o+(i&&!t||!i&&t?-1:1)*(n.width/2+w):s.x+s.width/2}:{x:s.x+s.width/2,y:s.y+s.height/2}}const j=(e,t,i,s,r,n)=>({y:s?e:t-(i?-1:1)*(n.height/2+w),x:s?t+(i&&!r||!i&&r?-1:1)*(n.width/2+w):e});function C({groupCenter:e,getStackLabel:i,group:s,posValue:n,negValue:o,posItemsData:a,yScale:d,isHoriz:l,isRtl:c,negItemsData:u,defaultFontSize:g,labelStyle:h,getTextDimensions:x}){const f=i({group:s,value:n,data:a}),I={fontSize:g,fontWeight:"bold",...h},m=o<0?i?.({group:s,value:o,data:u}):"",p=j(e,d.transform(n),!1,l,c,x(f,I)),b=j(e,d.transform(o),!0,l,c,x(m,I));return t.jsxs(t.Fragment,{children:[t.jsx("text",{class:r.styles.stackLabelStyle,style:I,...p,children:f}),t.jsx("text",{class:r.styles.stackLabelStyle,style:I,...b,children:m})]})}function k({item:e,seriesColor:i,isStacked:s,defaultFontSize:n,barDim:o,isRtl:a,isHoriz:d,getTextDimensions:l}){let u=null;const g=!e.labelPosition||"outsideBarEdge"===e.labelPosition&&s?"center":e.labelPosition,h=e.label,x=e.color||i;if("none"!=g&&h&&l&&(!s||"outsideBarEdge"!==g)){const i={fontSize:n,fill:s||!("outsideBarEdge"===g)?c.getContrastingTextColor(x):void 0,...e.labelStyle},f=function(e,t,i,s){return e?!(t.height>i.height)&&("outsideBarEdge"==s||t.width<i.width):!(t.width>i.width)&&("outsideBarEdge"==s||t.height<i.height)}(d,l(h,i),o,g||"center");u=f?t.jsx("text",{class:r.styles.dataLabelStyle,style:i,...D(d,a,e.value<0,o,g||"center",l?.(h,i)),children:h}):null}return u}function F({yScale:e,xScale:i,colors:r,series:n,groupIndex:c,hiddenIds:u,barGapRatio:g,dataItemGaps:h,groupWidth:f,highlightedIds:I,selectedIds:p,isPointInsideMarquee:v,orientation:w,isLog:D,activeId:j,getDataItem:F,isRtl:A,isStacked:E,isSelectionEnabled:T,focusedItemInfo:G,hoveredItemInfo:P,isDrillEnabled:z,group:B,timeAxisType:L,getTextDimensions:R,defaultFontSize:M,stacklabelStyle:N,getStackLabel:W}){const q="horizontal"===w,U=[],V=n.length;let H=D?e.domain()[0]:0,$=0;const _=[],J=[],K=a.useTranslationBundle("@oracle/oraclejet-preact"),O=E&&!!W&&"mixedFrequency"!=L;let Q="mixedFrequency"!=L?i.transform(null!=L?new Date(B.id).getTime():c):void 0;for(let a=0;a<V;a+=1){const w=F(a,c);if(!w||u?.has(w.id)||D&&w.value<=0)continue;"mixedFrequency"===L&&(Q=o.getMixedFreqGroupCenter(i,w));const C=G?.groupIndex===c&&G?.seriesIndex===a&&G?.isFocusVisible,N=P?.groupIndex===c&&P?.seriesIndex===a&&P?.isCurrent,W=!!C||!!N&&T,X=C&&G.isCurrent||N,Y=void 0===I||I.has(w.id),Z="on"===w.drilling||"off"!=w.drilling&&z,{barWidth:ee,offset:te,itemsGaps:ie}=x(a,f,g,V,h,E,A),se=Q+te,re=se+ee,{baselineCoord:ne,endCoord:oe}=S(w.value,e,E,D,ie,$,H);$+=w.value<0?w.value:0,H+=w.value>0?w.value:0,O&&(w.value>=0?_.push(w):J.push(w));const ae=b(w,n[a],r?.[a]),de=y(se,re,oe,ne,q),le=v?v?.(w.id,{x:de.x+de.width/2,y:de.y}):p?.has(w.id),ce=l.supportsMobileScreenReader||X?d.getItemAriaLabel(K,n[a].name||n[a].id.toString(),B.name||B.id,w.value,T,!!le,Z,w.accessibleLabel):"";U.push(t.jsxs(t.Fragment,{children:[s.createElement(m,{...de,...ae,seriesIndex:a,groupIndex:c,isFocused:W,activeId:X?j:"","aria-label":ce,isDimmed:!Y,isSelected:!!le,isPointerEnabled:Z||T,key:`${c};${a}`}),t.jsx(k,{item:w,isRtl:A,seriesColor:r[a%12],isStacked:E,defaultFontSize:M,barDim:de,isHoriz:q,getTextDimensions:R})]}))}return t.jsxs(t.Fragment,{children:[U,O&&R&&t.jsx(C,{group:B,isRtl:A,yScale:e,getStackLabel:W,defaultFontSize:M,getTextDimensions:R,posItemsData:_,negItemsData:J,isHoriz:q,groupCenter:Q,labelStyle:N,posValue:H,negValue:$})]})}function A(e,t,i,s){const r=d.getNextItemInGroup(e,i,s);if(r)return r;if(e.groupIndex<t){let r={seriesIndex:0,groupIndex:e.groupIndex+1};if(s(r.seriesIndex,r.groupIndex))return r;if(r=A(r,t,i,s),r)return r}return e}function E(e,t,i,s){const r=d.getPrevItemInGroup(e,s);if(r)return r;if(e.groupIndex>t){let r={groupIndex:e.groupIndex-1,seriesIndex:i-1};if(s(r.seriesIndex,r.groupIndex))return r;if(r=E(r,t,i,s),r)return r}return e}e.BarChart=function({width:e,height:s,selectedIds:r=[],hiddenIds:n=[],highlightedIds:a,hideAndShowBehavior:l="none",orientation:c="vertical",yAxis:g,series:f,groups:I,isStacked:m=!1,getDataItem:p,selectionMode:b="none",drilling:w="off",dataItemGaps:D=.5,...j}){const{direction:C}=i.useUser(),k="rtl"===C,T=new Set(n),G="horizontal"===c,P=j.xAxis?.timeAxisType,z=new Set(r),B=new Set(a);return t.jsx(u.Chart,{width:e,height:s,selectedIds:z,hiddenIds:n,hideAndShowBehavior:l,orientation:c,yAxis:g,series:f,groups:I,isStacked:m,getDataItem:p,selectionMode:b,drilling:w,renderGridLinesInFront:!1,findNearest:(e,t,i,s)=>{const r=function(e,t,i,s,r,n){return o=>{const{offset:a,barWidth:d}=x(o,e,t,i,s,r,n);return{offset:a,dataWidth:d}}}(i,s,f.length,D,m,k);return o.findNearestDataPoint(f,I,e,t,p,m,r,v,"log"===g?.scale,D,T,P)},getDataItemPos:(e,t,i,s)=>function(e,t,i,s,r,n,o,a,d,l,c,u,g,h){return(f,I)=>{const m=e.length;let p=0,b=0;for(let e=0;e<m;e+=1){const v=i(e,I);let w=I;if(h){const e="mixedFrequency"===h?i(f,I)?.x:t[I].id;w=new Date(e).getTime()}if(!v||n?.has(v.id)||l&&v.value<=0)continue;const D=s.transform(w),{barWidth:j,offset:C,itemsGaps:k}=x(e,a,d,m,o,c,u),F=D+C,A=F+j,{baselineCoord:E,endCoord:T}=S(v.value,r,c,l,k,b,p);if(b+=v.value<0?v.value:0,p+=v.value>0?v.value:0,f===e)return y(F,A,T,E,g)}}}(f,I,p,e,t,T,D,i,s,"log"===g?.scale,m,k,G,P),getNavUtil:(e,t)=>function(e,t,i,s,r,n){const o=(t,i)=>{const s=e(t,i);return Boolean(s)};return(e,a)=>{if(!r&&("ArrowDown"===a||"ArrowUp"===a))return e;let l;const c={groupIndex:e.groupIndex,seriesIndex:e.seriesIndex};return c.groupIndex<i?(c.groupIndex=i,c):c.groupIndex>s?(c.groupIndex=s,c):(r?l="ArrowLeft"===a?n?d.getNextItemInSeries(c,s,o):d.getPrevItemInSeries(c,i,o):"ArrowRight"===a?n?d.getPrevItemInSeries(c,i,o):d.getNextItemInSeries(c,s,o):"ArrowDown"===a?d.getPrevItemInGroup(c,o):d.getNextItemInGroup(c,t,o):"ArrowRight"===a?l=n?E(c,i,t,o):A(c,s,t,o):"ArrowLeft"===a&&(l=n?A(c,s,t,o):E(c,i,t,o)),l||c)}}(p,f.length,e,t,m,k),getGapRatio:(e,t)=>function(e,t,i){return e?.37+.26/(i-t+1):h}(m,e,t),getMarkerInfo:(e,t)=>({color:d.getItemColor(e,t,f,p),type:d.getMarkerType(e,t,"bar",p)}),isRtl:k,offset:.5,...j,children:({xStartIndex:e,xEndIndex:i,xScale:s,yScale:r,gapRatio:n,activeId:o,focusedItemInfo:d,hoveredItemInfo:l,groupWidth:u,isPointInsideMarquee:h,getTextDimensions:x,defaultFontSize:y,colors:S})=>t.jsx(t.Fragment,{children:I.slice(e,i+1).map(((i,v)=>t.jsx(F,{yScale:r,xScale:s,groupIndex:v+e,selectedIds:z,hiddenIds:T,highlightedIds:a?B:a,isDrillEnabled:"on"===w,series:f,barGapRatio:n,dataItemGaps:D,isPointInsideMarquee:h,isStacked:m,groupWidth:u,group:I[v],timeAxisType:j.xAxis?.timeAxisType,colors:S,activeId:o,isLog:"log"===g?.scale,orientation:c,getDataItem:p,isSelectionEnabled:"none"!=b,isRtl:k,focusedItemInfo:d,hoveredItemInfo:l,getTextDimensions:x,defaultFontSize:y,getStackLabel:j.getStackLabel})))})})}}));
//# sourceMappingURL=BarChart-6c921af0.js.map
